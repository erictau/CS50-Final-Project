{% extends "layout.html" %}

{% block title %} 
    Home 
{% endblock %} 

{% block main %}
<div class="confirmation-msg"> {{ message }}</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
<div class="charts">
    <canvas id="myChart" name="myChart" style="width:100%;max-width:700px"></canvas>
</div>
<script>
    // Utilizing Chart.js to present data.
    var xValues = [];
    var yValues = [];
    var yOriginalValues = [];
    var barColors = [];

    '{% for x in xVals %}'
        xValues.push('{{ x }}');
    '{% endfor %}'

    '{% for y in yVals %}'
        yValues.push('{{ y }}');
    '{% endfor %}'

    '{% for yOrig in yOriginalValues %}'
        yOriginalValues.push('{{ yOrig }}');
    '{% endfor %}'
    
    '{% for color in colors %}'
        barColors.push('{{ color }}');
    '{% endfor %}'
    
    console.log(xValues);
    console.log(yValues);
    console.log(yOriginalValues);
    console.log(barColors);
    
    var data = {
      labels: xValues,
      datasets: [
        {
          label: "Original",
          backgroundColor: "blue",
          data: yOriginalValues
        },
        {
          label: "Remaining",
          backgroundColor: "grey",
          data: yValues
        }
      ]
    }

    new Chart("myChart", {
      type: "bar",
      data: data,
      options: 
      {
        title: 
        {
          display: true,
          text: "Remaining Budget"
        },
        scales: 
        {
          xAxes: 
          [{
            barPercentage: 0.7,
            categoryPercentage: 0.5
          }],
          yAxes: 
          [{
            ticks: 
            {
              min: 0
            }
          }]
        },
      }
    });
</script>
    
{% endblock %}
